{% extends 'home.html' %}

{% block sidebar %}
    <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Produtos</li>
{% endblock %}

{% block pesquisar %}
    <form class="form-inline">
        <div class="mx-sm-3 mb-2">
            <input type="text" class="form-control" name="pesquisa" placeholder="Digite sua pesquisa">
        </div>
        <button type="submit" class="btn btn-outline-secondary mb-2">Pesquisar</button>
    </form>
{% endblock %}

{% block botao_novo %}
    <a class="btn btn-primary" href="{% url 'produto-add' %}" role="button">Novo produto</a>
{% endblock %}

{% block content %}
    <h4>Produtos</h4>
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th>Produto</th>
                <th>Categoria</th>
                <th>Compra</th>
                <th>Venda</th>
                <th>Estoque</th>
                <th>Unid. de medida</th>
                <!-- <th>Editar</th> -->
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for produto in produtos %}
            <tr>
                <td><a href="{% url 'produto-update' produto.id %}">{{produto.descricao|truncatechars:43}}</a></td>
                <td>{{produto.categoria}}</td>
                <td>R$ {{produto.valorpago}}</td>
                <td>R$ {{produto.valorvenda}}</td>
                <td>{{produto.estoque}}</td>
                <td>{{produto.und_medida}}</td>
                <!-- <td><a href="{% url 'produto-update' produto.id %}"><i class="bi bi-pencil-fill"></i></a></td> -->
                <td style="text-align: center;"><a href="{% url 'produto-delete' produto.id %}"><i class="bi bi-trash"></i></a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="pagination" style="padding-top: 30px;">
        <span class="step-links" style="position: relative; margin-left: auto; margin-right: auto;">
            {% if produtos.has_previous %}
            <a href="?page=1" class="btn btn-outline-secondary btn-sm">&laquo; Primeiro</a>
            <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-outline-primary btn-sm">Anterior</a>
            {% endif %}
    
            {% if produtos.number %}
            <span class="current">
                Pagina {{ produtos.number }} de {{ produtos.paginator.num_pages }}.
            </span>
            {% endif %}
    
            {% if produtos.has_next %}
            <a href="?page={{ produtos.next_page_number }}" class="btn btn-outline-primary btn-sm">Próxima</a>
            <a href="?page={{ produtos.paginator.num_pages }} " class="btn btn-outline-secondary btn-sm">Última &raquo;</a>
            {% endif %}
        </span>
    </div>
{% endblock %}
