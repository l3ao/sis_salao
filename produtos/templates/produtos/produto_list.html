{% extends 'home.html' %}

{% block sidebar %}
    <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Produtos</li>
{% endblock %}

{% block pesquisar %}
    <form class="form-inline">
        <div class="row">
            <div class="col">
                <div class="mx-sm-3 mb-2">
                    <input type="text" class="form-control" name="pesquisa" placeholder="Digite sua pesquisa">
                </div> 
            </div>
            <div class="col">
                <button type="submit" class="btn btn-outline-secondary mb-2">Pesquisar</button>
            </div>
          </div>
    </form>
{% endblock %}

{% block botao_novo %}
    <a class="btn btn-primary" href="{% url 'produto-add' %}" role="button">Novo produto</a>
{% endblock %}

{% block content %}
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th style="width:50%">Produto</th>
                <th style="width:15%"">Categoria</th>
                <th>Compra</th>
                <th>Venda</th>
                <th>Estoque</th>
                <th>Unid. de medida</th>
            </tr>
        </thead>
        <tbody>
            {% for produto in produtos %}
            <tr>
                <td><a href="{% url 'produto-update' produto.id %}">{{produto.descricao|truncatechars:43}}</a></td>
                <td>{{produto.categoria}}</td>
                <td>R$ {{produto.valorpago}}</td>
                <td>R$ {{produto.valorvenda}}</td>
                <td>{{produto.estoque}}</td>
                <td>{{produto.und_medida}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="pagination" style="padding-top: 20px; padding-bottom: 50px;">
        <span class="step-links" style="position: relative;">
            {% if produtos.has_previous %}
            <a href="?page=1" class="btn btn-outline-secondary btn-sm">&laquo; Primeiro</a>
            <a href="?page={{ produtos.previous_page_number }}" class="btn btn-outline-primary btn-sm">Anterior</a>
            {% endif %}
    
            {% if produtos.number %}
            <span class="current">
                Pagina {{ produtos.number }} de {{ produtos.paginator.num_pages }}.
            </span>
            {% endif %}
    
            {% if produtos.has_next %}
            <a href="?page={{ produtos.next_page_number }}" class="btn btn-outline-primary btn-sm">Próxima</a>
            <a href="?page={{ produtos.paginator.num_pages }} " class="btn btn-outline-secondary btn-sm">Última &raquo;</a>
            {% endif %}
        </span>
    </div>
{% endblock %}
